<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="com.mk.taskfactory.biz.mapper.ots.CityMapper">
    <resultMap id="BaseResultMap" type="com.mk.taskfactory.model.TCity">
        <id column="cityId" property="cityId" />
        <result column="code" property="code" />
        <result column="cityName" property="cityName" />
        <result column="proID" property="proID" />
        <result column="citySort" property="citySort" />
        <result column="latItude" property="latItude" />
        <result column="longItude" property="longItude" />
        <result column="simpleName" property="simpleName" />
        <result column="isHotCity" property="isHotCity" />
        <result column="range" property="range" />
        <result column="isSelect" property="isSelect" />
        <result column="queryCityName" property="queryCityName" />
        <result column="level" property="level" />
    </resultMap>

    <sql id="Base_Column_List" >
        cityId, `code`, cityName, proID, citySort, latItude, longItude,
        simpleName, isHotCity, `range`, isSelect, queryCityName, `level`
    </sql>
    <sql id="Base_Query_List" >
        <where>
            <if test="cityId != null">
                cityId = #{cityId}
            </if>
            <if test="code != null">
                AND `code` = #{code}
            </if>
            <if test="proID != null">
                AND proID = #{proID}
            </if>
            <if test="citySort != null">
                AND citySort = #{citySort}
            </if>
            <if test="level != null">
                AND `level` = #{level}
            </if>
        </where>
    </sql>
    <select id="getByCode" resultMap="BaseResultMap" parameterType="java.lang.String" >
        select
         <include refid="Base_Column_List" />
        from t_city WHERE
        `code` = #{code}
        limit 1
    </select>
    <select id="qureyByPramas" resultMap="BaseResultMap" parameterType="com.mk.taskfactory.api.dtos.TCityDto" >
        select
        <include refid="Base_Column_List" />
        from t_city
        <include refid="Base_Query_List" />
        ORDER BY `code` DESC
    </select>
</mapper>