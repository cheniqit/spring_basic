<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.mk.channel.biz.mapper.umember.BOtaOrderMapper">

	<resultMap id="ota_order" type="com.mk.channel.model.BOtaOrder">
        <result property="id" column="id" />
        <result property="hotelId" column="hotelId" />
        <result property="hotelName" column="hotelName" />
        <result property="hotelPms" column="hotelPms" />
        <result property="orderMethod" column="orderMethod" />
        <result property="orderType" column="orderType" />
        <result property="priceType" column="priceType" />
        <result property="beginTime" column="beginTime" />
        <result property="checkinTime" column="checkinTime" />
        <result property="endTime" column="endTime" />
        <result property="checkOutTime" column="checkOutTime" />
        <result property="mid" column="mid" />
        <result property="mLevel" column="mLevel" />
        <result property="createTime" column="createTime" />
        <result property="promotion" column="promotion" />
        <result property="coupon" column="coupon" />
        <result property="price" column="price" />
        <result property="contacts" column="contacts" />
        <result property="contactsPhone" column="contactsPhone" />
        <result property="contactsEmail" column="contactsEmail" />
        <result property="contactWeixin" column="contactWeixin" />
        <result property="note" column="note" />
        <result property="orderStatus" column="orderStatus" />
        <result property="receipt" column="receipt" />
        <result property="updateTime" column="updateTime" />
        <result property="canShow" column="canShow" />
        <result property="hiddwnOrder" column="hiddwnOrder" />
        <result property="osType" column="osType" />
        <result property="version" column="version" />
        <result property="spreadUser" column="spreadUser" />
        <result property="dayNumber" column="dayNumber" />
        <result property="isScore" column="isScore" />
        <result property="activeId" column="activeId" />
        <result property="invalidReason" column="invalidReason" />
        <result property="ruleCode" column="ruleCode" />
        <result property="userLongitude" column="userLongitude" />
        <result property="availableMoney" column="availableMoney" />
        <result property="cashBack" column="cashBack" />
        <result property="cityCode" column="cityCode" />
        <result property="isReceiveCashBack" column="isReceiveCashBack" />
	</resultMap>

    <select id="getMemberIsOrder" parameterType="com.mk.channel.api.dtos.BOtaOrderDto"  resultType="Integer" >
        SELECT COUNT(mid) FROM  b_otaOrder
        <where>
            <if test="mid != null">
                mid = #{mid}
            </if>
            <if test="createTime != null">
                AND createTime >= #{createTime}
            </if>
        </where>
       GROUP BY  mid ORDER  BY  createTime DESC
    </select>

</mapper>
